{
  "permissions": {
    "allow": [
      "Bash(MOLLIE_API_KEY=\"live_vur5Jktfz6jkdU23SrUWdkst9GJqpa\" node -e \"\nconst https = require(''https'');\n\n// First create a customer (simulate what our app does)\nconst customerData = JSON.stringify({\n  email: ''test-checkout@tutusporta.com'',\n  name: ''Test User'',\n  metadata: {\n    userId: ''test-checkout-user''\n  }\n});\n\nconst customerOptions = {\n  hostname: ''api.mollie.com'',\n  port: 443,\n  path: ''/v2/customers'',\n  method: ''POST'',\n  headers: {\n    ''Authorization'': ''Bearer live_vur5Jktfz6jkdU23SrUWdkst9GJqpa'',\n    ''Content-Type'': ''application/json'',\n    ''Content-Length'': customerData.length\n  }\n};\n\nconsole.log(''=== Creating Customer ==='');\nconst customerReq = https.request(customerOptions, (res) => {\n  console.log(''Customer Status:'', res.statusCode);\n  let body = '''';\n  res.on(''data'', (chunk) => { body += chunk; });\n  res.on(''end'', () => {\n    console.log(''Customer Response:'', body);\n    \n    if (res.statusCode === 201) {\n      const customer = JSON.parse(body);\n      \n      // Now create payment EXACTLY like our app does\n      const paymentData = JSON.stringify({\n        amount: {\n          currency: ''EUR'',\n          value: ''9.00''\n        },\n        description: ''TutusPorta STARTER Plan - Payment (Vexnexa)'',\n        customerId: customer.id,\n        redirectUrl: ''https://tutusporta.com/dashboard?checkout=success'',\n        webhookUrl: ''https://tutusporta.com/api/mollie/webhook'',\n        metadata: {\n          userId: ''test-checkout-user'',\n          plan: ''STARTER'',\n          type: ''upgrade''\n        }\n      });\n      \n      const paymentOptions = {\n        hostname: ''api.mollie.com'',\n        port: 443,\n        path: ''/v2/payments'',\n        method: ''POST'',\n        headers: {\n          ''Authorization'': ''Bearer live_vur5Jktfz6jkdU23SrUWdkst9GJqpa'',\n          ''Content-Type'': ''application/json'',\n          ''Content-Length'': paymentData.length\n        }\n      };\n      \n      console.log(''\\n=== Creating Payment (Exact App Logic) ==='');\n      console.log(''Payment Data:'', paymentData);\n      \n      const paymentReq = https.request(paymentOptions, (res) => {\n        console.log(''Payment Status:'', res.statusCode);\n        let paymentBody = '''';\n        res.on(''data'', (chunk) => { paymentBody += chunk; });\n        res.on(''end'', () => {\n          console.log(''Payment Response:'', paymentBody);\n          \n          if (res.statusCode !== 201) {\n            console.log(''\\n=== PAYMENT CREATION FAILED ==='');\n            try {\n              const error = JSON.parse(paymentBody);\n              console.log(''Error details:'', error);\n            } catch (e) {\n              console.log(''Could not parse error response'');\n            }\n          }\n        });\n      });\n      \n      paymentReq.on(''error'', (error) => {\n        console.error(''Payment error:'', error);\n      });\n      \n      paymentReq.write(paymentData);\n      paymentReq.end();\n    }\n  });\n});\n\ncustomerReq.on(''error'', (error) => {\n  console.error(''Customer error:'', error);\n});\n\ncustomerReq.write(customerData);\ncustomerReq.end();\n\")"
    ],
    "deny": [],
    "ask": []
  }
}